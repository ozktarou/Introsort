# Introsort

イントロソート(intro sort)を実装した C++のヘッダーオンリーライブラリです。
イントロソートが用いる、以下のソートも使えるようにしました。

- 挿入ソート(insertion sort)
- ヒープソート(heap sort)
- クイックソート(quick sort)

通常は`std::sort()`で十分と思いますが、次のような場合にご利用ください。

- ソートアルゴリズムの特性を理解したうえで使い分けたい
- 目的に応じて改変したい

## 使用例

### ソースコード

```
#include <iostream>
#include <omoteura/intro_sort.h>
#include <vector>

namespace ou = omoteura;

int main(int argc, char *argv[])
{
    std::vector<int> items{2, 5, 3, 8, 5};

    std::cout << "input: [";
    for (int item : items)
    {
        std::cout << " " << item;
    }
    std::cout << " ]" << std::endl;

    // 昇順にソート
    ou::intro_sort(items.begin(), items.end());

    std::cout << "sorted (asc): [";
    for (int item : items)
    {
        std::cout << " " << item;
    }
    std::cout << " ]" << std::endl;

    // 降順にソート
    ou::intro_sort(items.begin(), items.end(), std::greater<int>{});

    std::cout << "sorted (desc): [";
    for (int item : items)
    {
        std::cout << " " << item;
    }
    std::cout << " ]" << std::endl;

    // ou::insertion_sort(), ou::heap_sort(), ou::quick_sort()も同じように使えます。

    return 0;
}
```

### 出力結果

```
input: [ 2 5 3 8 5 ]
sorted (asc): [ 2 3 5 5 8 ]
sorted (desc): [ 8 5 5 3 2 ]
```

## パフォーマンス

### 測定環境

- OS: Windows 11 Pro 24H2
- CPU: Intel Core i7-14700F 2.10 GHz
- メモリ: 32.0 GB 3200 MT/秒
- コンパイラ: Visual Studio Build Tools 2022

### ランダムに並べた入力データの測定結果

|    項目数 |    insertion |         heap |        quick |        intro |    std::sort |
| --------: | -----------: | -----------: | -----------: | -----------: | -----------: |
|       100 | 0.000001 [s] | 0.000001 [s] | 0.000001 [s] | 0.000003 [s] | 0.000002 [s] |
|     1,000 | 0.000095 [s] | 0.000017 [s] | 0.000025 [s] | 0.000026 [s] | 0.000028 [s] |
|    10,000 | 0.009445 [s] | 0.000209 [s] | 0.000320 [s] | 0.000344 [s] | 0.000360 [s] |
|   100,000 | 0.989406 [s] | 0.003078 [s] | 0.004229 [s] | 0.004832 [s] | 0.004741 [s] |
| 1,000,000 |      skipped | 0.054510 [s] | 0.049082 [s] | 0.048409 [s] | 0.055289 [s] |

### 昇順に並べた入力データの測定結果

|    項目数 |    insertion |         heap |        quick |        intro |    std::sort |
| --------: | -----------: | -----------: | -----------: | -----------: | -----------: |
|       100 | 0.000000 [s] | 0.000001 [s] | 0.000000 [s] | 0.000000 [s] | 0.000000 [s] |
|     1,000 | 0.000000 [s] | 0.000012 [s] | 0.000003 [s] | 0.000003 [s] | 0.000003 [s] |
|    10,000 | 0.000002 [s] | 0.000151 [s] | 0.000040 [s] | 0.000039 [s] | 0.000038 [s] |
|   100,000 | 0.000022 [s] | 0.002069 [s] | 0.000410 [s] | 0.000406 [s] | 0.000412 [s] |
| 1,000,000 |      skipped | 0.026409 [s] | 0.004664 [s] | 0.004613 [s] | 0.004512 [s] |

### 降順に並べた入力データの測定結果

|    項目数 |    insertion |         heap |        quick |        intro |    std::sort |
| --------: | -----------: | -----------: | -----------: | -----------: | -----------: |
|       100 | 0.000002 [s] | 0.000001 [s] | 0.000000 [s] | 0.000000 [s] | 0.000000 [s] |
|     1,000 | 0.000189 [s] | 0.000016 [s] | 0.000003 [s] | 0.000003 [s] | 0.000007 [s] |
|    10,000 | 0.019095 [s] | 0.000197 [s] | 0.000040 [s] | 0.000044 [s] | 0.000056 [s] |
|   100,000 | 1.971720 [s] | 0.002148 [s] | 0.000442 [s] | 0.000407 [s] | 0.000622 [s] |
| 1,000,000 |      skipped | 0.028138 [s] | 0.005255 [s] | 0.004947 [s] | 0.007146 [s] |

Copyright (c) 2025 ozk
